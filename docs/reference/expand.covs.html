<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Expand covariates in competing risks dataset in stacked format — expand.covs • mstate</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Expand covariates in competing risks dataset in stacked format — expand.covs"><meta name="description" content="Given a competing risks dataset in stacked format, and one or more
covariates, this function adds type-specific covariates to the dataset. The
original dataset with the type-specific covariates appended is returned."><meta property="og:description" content="Given a competing risks dataset in stacked format, and one or more
covariates, this function adds type-specific covariates to the dataset. The
original dataset with the type-specific covariates appended is returned."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mstate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/visuals_demo.html">Visualising multi-state models using mstate</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hputter/mstate/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Expand covariates in competing risks dataset in stacked format</h1>
      <small class="dont-index">Source: <a href="https://github.com/hputter/mstate/blob/HEAD/R/expand.covs.R" class="external-link"><code>R/expand.covs.R</code></a></small>
      <div class="d-none name"><code>expand.covs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given a competing risks dataset in stacked format, and one or more
covariates, this function adds type-specific covariates to the dataset. The
original dataset with the type-specific covariates appended is returned.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">expand.covs</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>An object of class <code>"msdata"</code>, such as output by
<code><a href="msprep.html">msprep</a></code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments to be passed to or from other methods. They
are ignored in this function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An data frame object of the same class as the data argument,
containing the design matrix for the type-specific covariates, either on its
own (<code>append</code>=<code>FALSE</code>) or appended to the data
(<code>append</code>=<code>TRUE</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Type-specific covariates can be used to analyse separate effects on all
event types in a single analysis based on a stacked data set (Putter, Fiocco
&amp; Geskus (2007) and Geskus (2016)). It is only unambiguously defined for
numeric covariates or for explicit codings. Rows that contain the data for
that specific event type have the value copied from the original covariate
in case it is numeric. In all other rows it has the value zero. If the
covariate is a factor, it will be expanded on the design matrix given by
<code><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix</a></code>. For standard "treatment
contrasts" this means that dummy variables are created.  If the covariate is
a factor, the column name combines the name of the covariate with the
specific event type. If <code>longnames</code>=<code>TRUE</code>, both parts are
intersected by the specific labels in the coding. Missing values in the
basic covariates are allowed and result in missing values in the expanded
covariates.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Putter H, Fiocco M, Geskus RB (2007). Tutorial in biostatistics:
Competing risks and multi-state models. <em>Statistics in Medicine</em>
<b>26</b>, 2389–2430.</p>
<p>Geskus, Ronald B. (2016). <em>Data Analysis with Competing Risks and
Intermediate States.</em> CRC Press, Boca Raton.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="expand.covs.msdata.html">expand.covs.msdata</a></code>.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Ronald Geskus and Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># small data set in stacked format</span></span></span>
<span class="r-in"><span><span class="va">tg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>time<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">5</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">9</span>,<span class="fl">9</span><span class="op">)</span>,status<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>,failcode<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"I"</span>,<span class="st">"II"</span><span class="op">)</span>,<span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        x1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>,x2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tg</span><span class="op">$</span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">tg</span><span class="op">$</span><span class="va">x1</span>,labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"male"</span>,<span class="st">"female"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># expanded covariates</span></span></span>
<span class="r-in"><span><span class="fu">expand.covs</span><span class="op">(</span><span class="va">tg</span>,covs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>,<span class="st">"x2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   time status failcode     x1 x2 x1.I x1.II x2.I x2.II</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    5      1        I   male  3    0     0    3     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    5      0       II   male  3    0     0    0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    1      2        I female  2    1     0    2     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    1      2       II female  2    0     1    0     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    9      0        I female  1    1     0    1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    9      1       II female  1    0     1    0     1</span>
<span class="r-in"><span><span class="fu">expand.covs</span><span class="op">(</span><span class="va">tg</span>,covs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>,<span class="st">"x2"</span><span class="op">)</span>,longnames<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   time status failcode     x1 x2 x1female.I x1female.II x2.I x2.II</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    5      1        I   male  3          0           0    3     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    5      0       II   male  3          0           0    0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    1      2        I female  2          1           0    2     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    1      2       II female  2          0           1    0     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    9      0        I female  1          1           0    1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    9      1       II female  1          0           1    0     1</span>
<span class="r-in"><span><span class="fu">expand.covs</span><span class="op">(</span><span class="va">tg</span>,covs<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>,<span class="st">"x2"</span><span class="op">)</span>,append<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x1.I x1.II x2.I x2.II</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0     0    3     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    0     0    0     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    1     0    2     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    0     1    0     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    1     0    1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    0     1    0     1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hein Putter, Liesbeth C. de Wreede, Marta Fiocco, Edouard F. Bonneville.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

